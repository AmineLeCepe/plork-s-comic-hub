<!doctype html>
<html lang="en">
    <title>Home</title>
    <%- include("partials/head" )%>
    <%
        let sampleComic1 = {
            name: 'Comic 1',
            tags: ["Tag 1", "Tag 2", "Tag 3"]
        }
        let sampleChapter1 = {
            title: "Chapter 1",
            description: "Placeholder desc",
            number: 1,
            pages: 40,
            cover: "/assets/chapter-placeholder.png",
            date: Date.now()
        }

        let sampleComic2 = {
            name: 'Comic 2',
            tags: ["Tag 1", "Tag 2", "Tag 3"]
        }
        let sampleChapter2 = {
            title: "Chapter 2",
            description: "Placeholder desc 2",
            number: 1,
            pages: 40,
            cover: "/assets/chapter-placeholder.png",
            date: Date.now()
        }
    %>

<body>
    <%- include("partials/navbar") %>
    <div class="main-content">
        <%- include("partials/navbar2") %>
        <div class="currently-trending">
            <h1>Currently Trending</h1>

            <div class="carousel-container">
                <button class="carousel-btn prev">‹</button>

                <div class="carousel-track">
                    <%
                    let sampleData = [
                        {comic: sampleComic1, chapter: sampleChapter1},
                        {comic: sampleComic2, chapter: sampleChapter2}
                    ];

                            for(let item of sampleData) {
                    %>
                        <div class="carousel-item">
                            <img src="<%= item.chapter.cover %>" alt="Chapter Thumbnail" class="chapter-thumbnail"/>
                            <div class="chapter-info">
                                <h3 class="comic-name"><%= item.comic.name %></h3>
                                <h5 class="tags">
                                    <% for(let tag of item.comic.tags) { %>
                                        <span class="tag"><%= tag %></span>
                                    <% } %>
                                </h5>
                                <h4 class="chapter-title"><%= item.chapter.number%>. <%= item.chapter.title %></h4>
                                <p class="chapter-description"><%= item.chapter.description %></p>
                                <span class="chapter-date">Released: <%= new Date(item.chapter.date).toLocaleDateString() %></span>
                            </div>
                        </div>
                    <% } %>
                </div>

                <button class="carousel-btn next">›</button>
            </div>
        </div>
        <div class="latest">
            <h1>Latest Releases</h1>
            <div class="latest-container">
                <!-- Column 1 -->
                <div class="latest-column">
                    <% 
                    // Create sample data for the first column
                    for(let i = 0; i < 4; i++) { 
                        let chapter = {
                            title: `Chapter ${i+1}`,
                            number: i+1,
                            cover: "/assets/chapter-placeholder.png",
                            date: Date.now() - (i * 86400000) // One day earlier for each item
                        };
                        let comic = {
                            name: `Sample Comic ${i+1}`
                        };
                    %>
                        <div class="latest-chapter-item">
                            <div class="chapter-header">
                                <img src="<%= chapter.cover %>" alt="Chapter Thumbnail" class="chapter-thumbnail-small"/>
                                <div class="chapter-info-small">
                                    <h4 class="comic-name-small"><%= comic.name %></h4>
                                    <h5 class="chapter-title-small"><%= chapter.number %>. <%= chapter.title %></h5>
                                    <span class="chapter-date-small">Released: <%= new Date(chapter.date).toLocaleDateString() %></span>
                                </div>
                            </div>
                        </div>
                    <% } %>
                </div>
                
                <!-- Column 2 -->
                <div class="latest-column">
                    <% 
                    // Create sample data for the second column
                    for(let i = 4; i < 8; i++) { 
                        let chapter = {
                            title: `Chapter ${i+1}`,
                            number: i+1,
                            cover: "/assets/chapter-placeholder.png",
                            date: Date.now() - (i * 86400000)
                        };
                        let comic = {
                            name: `Sample Comic ${i+1}`
                        };
                    %>
                        <div class="latest-chapter-item">
                            <div class="chapter-header">
                                <img src="<%= chapter.cover %>" alt="Chapter Thumbnail" class="chapter-thumbnail-small"/>
                                <div class="chapter-info-small">
                                    <h4 class="comic-name-small"><%= comic.name %></h4>
                                    <h5 class="chapter-title-small"><%= chapter.number %>. <%= chapter.title %></h5>
                                    <span class="chapter-date-small">Released: <%= new Date(chapter.date).toLocaleDateString() %></span>
                                </div>
                            </div>
                        </div>
                    <% } %>
                </div>
                
                <!-- Column 3 -->
                <div class="latest-column">
                    <% 
                    // Create sample data for the third column
                    for(let i = 8; i < 12; i++) { 
                        let chapter = {
                            title: `Chapter ${i+1}`,
                            number: i+1,
                            cover: "/assets/chapter-placeholder.png",
                            date: Date.now() - (i * 86400000)
                        };
                        let comic = {
                            name: `Sample Comic ${i+1}`
                        };
                    %>
                        <div class="latest-chapter-item">
                            <div class="chapter-header">
                                <img src="<%= chapter.cover %>" alt="Chapter Thumbnail" class="chapter-thumbnail-small"/>
                                <div class="chapter-info-small">
                                    <h4 class="comic-name-small"><%= comic.name %></h4>
                                    <h5 class="chapter-title-small"><%= chapter.number %>. <%= chapter.title %></h5>
                                    <span class="chapter-date-small">Released: <%= new Date(chapter.date).toLocaleDateString() %></span>
                                </div>
                            </div>
                        </div>
                    <% } %>
                </div>
            </div>
        </div>
    </div>


    <%- include("partials/scripts")%>
</body>
</html>