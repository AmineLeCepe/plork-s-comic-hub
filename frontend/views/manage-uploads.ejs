<!doctype html>
<html lang="en">
<head>
    <title>Manage Uploads</title>
    <%- include("partials/head") %>
    <link rel="stylesheet" href="/css/manage-uploads.css">
</head>
<body>
<%- include("partials/navbar") %>
<div class="main-content">
    <%- include("partials/navbar2") %>

    <div class="my-uploads-section">
        <h1>My Uploads</h1>
        <div class="uploads-container">
            <% if (myUploads && myUploads.length > 0) { %>
                <% for(let comic of myUploads) { %>
                    <a href="/manage-uploads/comic/<%= comic._id %>" style="text-decoration: none; color: inherit;">
                        <div class="comic-thumbnail">
                            <img src="<%= comic.cover %>" alt="<%= comic.title %>">
                            <div class="comic-title-overlay">
                                <span><%= comic.title %></span>
                            </div>
                        </div>
                    </a>
                <% } %>
            <% } else { %>
                <p class="no-comics-message">No comics uploaded</p>
            <% } %>
        </div>
        <button class="new-comic-btn" id="openModal">+ New Comic</button>
    </div>

    <%- include("partials/new-comic-modal.ejs") %>
</div>

<script>
    const openBtn = document.getElementById("openModal");
    const closeBtn = document.getElementById("closeModal");
    const modal = document.getElementById("modal");
    const coverInput = document.getElementById("cover");
    const coverPreview = document.getElementById("coverPreview");

    openBtn.addEventListener("click", function() {
        modal.classList.add("open");
    });

    closeBtn.addEventListener("click", function() {
        modal.classList.remove("open");
    });

    // Show image preview on file selection
    coverInput.addEventListener("change", function() {
        if (this.files && this.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                coverPreview.src = e.target.result;
            };
            reader.readAsDataURL(this.files[0]);
        }
    });
</script>

<%- include("partials/scripts") %>


</body>
</html>